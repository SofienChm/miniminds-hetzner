<div *ngIf="userRole === 'Admin' || userRole === 'Teacher'" class="container-fluid mt-4">
  <!-- Admin/Teacher Dashboard -->
  <div>
    <!-- Stats Cards -->
    <div class="row">
      <div class="col-xl-8 first-dashbord-card">
        <div class="row g-4 mb-3">
          <div class="col-xl-4">
            <div class="card stat-card shadow-sm">
              <div class="card-body d-flex align-items-center p-3">
                <div class="stat-icon-wrapper me-3">
                  <i class="bi bi-people-fill"></i>
                </div>
                <div class="stat-content">
                  <h3 class="stat-number" *ngIf="!loadingStates.children">{{ stats.children }}</h3>
                  <div *ngIf="loadingStates.children" class="skeleton-number"></div>
                  <p class="stat-label mb-0">{{ 'DASHBOARD.CHILDREN' | translate }}</p>
                </div>
              </div>
            </div>
          </div>
          <div class="col-xl-4">
            <div class="card stat-card shadow-sm">
              <div class="card-body d-flex align-items-center p-3">
                <div class="stat-icon-wrapper me-3">
                  <i class="bi bi-person-workspace"></i>
                </div>
                <div class="stat-content">
                  <h3 class="stat-number">{{ stats.teachers }}</h3>
                  <p class="stat-label mb-0">{{ 'DASHBOARD.EDUCATORS' | translate }}</p>
                </div>
              </div>
            </div>
          </div>
          <div class="col-xl-4">
            <div class="card stat-card shadow-sm">
              <div class="card-body d-flex align-items-center p-3">
                <div class="stat-icon-wrapper me-3">
                  <i class="bi bi-person-fill"></i>
                </div>
                <div class="stat-content">
                  <h3 class="stat-number" *ngIf="!loadingStates.parents">{{ stats.parents }}</h3>
                  <div *ngIf="loadingStates.parents" class="skeleton-number"></div>
                  <p class="stat-label mb-0">{{ 'DASHBOARD.PARENTS' | translate }}</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row g-4">
          <div class="col-xl-5 mb-3">
            <div class="card card-general card-attendance shadow-sm h-100">
              <div class="card-header border-0">
                <h5 class="mb-0"><i class="bi bi-people-fill me-2"></i>{{ 'DASHBOARD.CHILD_ATTENDANCE' | translate }}</h5>
              </div>
              <div class="card-body">
                <!-- Loading state -->
                <div *ngIf="loadingStates.children" class="text-center py-4">
                  <div class="skeleton-chart"></div>
                </div>
                <!-- Loaded state -->
                <div *ngIf="!loadingStates.children">
                  <div class="chart-container text-center" style="height: 180px; width: 180px; margin: 0 auto;">
                    <canvas baseChart [data]="attendanceChartData" [options]="attendanceChartOptions" type="doughnut"></canvas>
                  </div>
                  <div class="mt-3 stat-style">
                    <div class="d-flex justify-content-between align-items-center items">
                      <span class="present circle"></span>
                      <span class="fw-bold">{{ presentCount }}</span>
                      <span class="text-muted">{{ 'DASHBOARD.PRESENT' | translate }}</span>
                    </div>
                    <div class="d-flex justify-content-between align-items-center items">
                      <span class="absent circle"></span>
                      <span class="fw-bold">{{ absentCount }}</span>
                      <span class="text-muted">{{ 'DASHBOARD.ABSENT' | translate }}</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-xl-7">
            <div class="card card-general shadow-sm">
              <div class="card-header border-0">
                <h5 class="card-title">
                  <i class="bi bi-calendar-check"></i>
                  {{ 'DASHBOARD.WEEKLY_ATTENDANCE' | translate }}
                </h5>
              </div>
              <div class="card-body">
                <!-- Loading state -->
                <div *ngIf="loadingStates.attendance" class="d-flex align-items-center justify-content-center" style="height: 250px;">
                  <div class="skeleton-bar-chart"></div>
                </div>
                <!-- Loaded state -->
                <div *ngIf="!loadingStates.attendance" style="height: 250px;">
                  <canvas baseChart
                    [data]="attendanceBarChartData"
                    [options]="attendanceBarChartOptions"
                    type="bar">
                  </canvas>
                </div>
              </div>
            </div>
          </div>
            <div class="col-xl-12 mt-0">
              <div class="card card-recently shadow-sm card-general">
                <div class="card-header bg-white  d-flex justify-content-between align-items-center py-3">
                  <h5 class="mb-0"><i class="bi bi-person-fill-add"></i>{{ 'DASHBOARD.RECENTLY_ADDED_CHILDREN' | translate
                    }}</h5>
                  <a [routerLink]="['/children']" class="view-all btn btn-sm btn-outline-primary">{{ 'DASHBOARD.VIEW_ALL'
                    | translate
                    }}</a>
                </div>
                <div class="card-body">
                  <!-- Loading state -->
                  <div *ngIf="loadingStates.children" class="skeleton-table">
                    <div class="skeleton-row" *ngFor="let i of [1,2,3,4]"></div>
                  </div>
                  <!-- Loaded state -->
                  <div *ngIf="!loadingStates.children" class="table-responsive custom-table">
                    <table class="table table-hover">
                      <tbody>
                        <tr>
                          <th class="">{{ 'DASHBOARD.TABLE_IMG' | translate }}</th>
                          <th>{{ 'DASHBOARD.TABLE_NAME' | translate }}</th>
                          <th>{{ 'DASHBOARD.TABLE_GENDER' | translate }}</th>
                          <th>{{ 'DASHBOARD.TABLE_PARENT' | translate }}</th>
                          <th>{{ 'DASHBOARD.TABLE_MOBILE' | translate }}</th>
                          <th class="action-recenttly">{{ 'DASHBOARD.TABLE_ACTIONS' | translate }}</th>
                        </tr>
                        <div *ngIf="recentChildren.length === 0" class="text-center text-muted py-4">
                          <i class="bi bi-inbox icon-3x mb-3 opacity-25"></i>
                          <p>{{ 'DASHBOARD.NO_CHILDREN' | translate }}</p>
                        </div>
                        <tr *ngFor="let child of recentChildren; trackBy: trackById">
                          <td><img loading="lazy" [src]="child.profilePicture || 'assets/child.png'"
                              alt="student" class="img-fluid img-student"></td>
                          <td class="text-nowrap name-last">{{ child.firstName }} {{child.lastName }}</td>
                          <td class="text-nowrap">{{ child.gender }}</td>
                          <td class="text-nowrap">{{ child.parent?.firstName }} {{ child.parent?.lastName }}</td>
                          <td>{{ child.parent?.phoneNumber || '-' }}</td>
                          <td class="action-recenttly">
                            <!-- <a href="#" class="waves-effect waves-light btn btn-sm btn-primary-light btn-circle mx-5"><i class="bi bi-link"></i></a> -->
                            <button class="btn btn-sm btn-view" [routerLink]="['/children/detail', child.id]">
                              <i class="bi bi-eye"></i>
                            </button>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-xl-6">
              <div class="card card-general gender-card shadow-sm">
                <div class="card-header">
                  <h5 class="mb-0"><i class="bi bi-people-fill"></i>{{ 'DASHBOARD.GENDER_DISTRIBUTION' | translate }}</h5>
                </div>
                <div class="card-body">
                  <!-- Loading state -->
                  <div *ngIf="loadingStates.children" class="text-center py-4">
                    <div class="skeleton-chart"></div>
                  </div>
                  <!-- Loaded state -->
                  <div *ngIf="!loadingStates.children">
                    <div class="chart-container text-center" style="height: 180px; width: 180px; margin: 0 auto;">
                      <canvas baseChart [data]="genderChartData" [options]="genderChartOptions" type="doughnut"></canvas>
                    </div>
                    <div class="mt-3 stat-style">
                      <div class="first d-flex justify-content-between">
                        <span class="circle"></span>
                        <span class="fw-bold">{{ boysCount }} ({{ boysPercentage }}%)</span>
                        <span class="text-muted">{{ 'DASHBOARD.BOYS' | translate }}</span>
                      </div>
                      <div class="second d-flex justify-content-between ">
                        <span class="circle"></span>
                        <span class="fw-bold">{{ girlsCount }} ({{ girlsPercentage }}%)</span>
                        <span class="text-muted">{{ 'DASHBOARD.GIRLS' | translate }}</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          <div class="col-xl-6">
        <div class="card card-general card-statut-payment shadow-sm">
          <div class="card-header">
            <h5 class="mb-0"><i class="bi bi-wallet me-2 "></i>{{ 'DASHBOARD.FEE_PAYMENT_STATUS' | translate }}</h5>
          </div>
          <div class="card-body">
            <!-- Loading state -->
            <div *ngIf="loadingStates.fees" class="text-center py-4">
              <div class="skeleton-chart"></div>
            </div>
            <!-- Loaded state -->
            <div *ngIf="!loadingStates.fees">
              <div class="chart-container text-center" style="height: 180px; width: 180px; margin: 0 auto;">
                <canvas baseChart [data]="paymentChartData" [options]="paymentChartOptions" type="doughnut"></canvas>
              </div>
              <div class="mt-3 stat-style">
                <div class="d-flex justify-content-between align-items-center items">
                  <span class="circle paied"></span>
                  <span class="text me-2">{{ 'DASHBOARD.PAID' | translate }}</span>
                  <span class="text fw-bold">{{ paymentStats.paid }}</span>
                </div>
                <div class="d-flex justify-content-between align-items-center items">
                  <span class="circle pending"></span>
                  <span class="text me-2">{{ 'DASHBOARD.PENDING' | translate }}</span>
                  <span class="text fw-bold">{{ paymentStats.pending }}</span>
                </div>
                <div class="d-flex justify-content-between align-items-center items">
                  <span class="circle overdue"></span>
                  <span class="text me-2">{{ 'DASHBOARD.OVERDUE' | translate }}</span>
                  <span class="text fw-bold">{{ paymentStats.overdue }}</span>
                </div>
              </div>
            </div>
          </div>
        </div>
          </div>
        </div>
      </div>
      <div class="col-xl-4">
        <div class="quick-actions-container bg-white p-3 mb-3 shadow-sm">
          <div class="mb-3">
            <h5 class="mb-0">{{ 'DASHBOARD.QUICK_LINKS' | translate }}</h5>
          </div>
          <div class="row g-2">
            <div class="col-4 items">
              <div class="card quick-action-card text-center p-3" [routerLink]="['/children/add']" style="cursor: pointer;">
                <i class="bi bi-person-plus-fill"></i>
                <small>{{ 'DASHBOARD.ADD_CHILD' | translate }}</small>
              </div>
            </div>
            <div class="col-4 items">
              <div class="card quick-action-card text-center p-3" [routerLink]="['/children']" style="cursor: pointer;">
                <i class="bi bi-people-fill" ></i>
                <small>{{ 'DASHBOARD.CHILDREN_LIST' | translate }}</small>
              </div>
            </div>
            <div class="col-4 items">
              <div class="card quick-action-card text-center p-3" [routerLink]="['/leaves/add']" style="cursor: pointer;">
                <i class="bi bi-calendar-plus"></i>
                <small>{{ 'DASHBOARD.ADD_LEAVE' | translate }}</small>
              </div>
            </div>
            <div class="col-4 items">
              <div class="card quick-action-card text-center p-3" [routerLink]="['/daily-activities']" style="cursor: pointer;">
                <i class="bi bi-clipboard-data"></i>
                <small>{{ 'DASHBOARD.DAILY_REPORTS' | translate }}</small>
              </div>
            </div>
            <div class="col-4 items">
              <div class="card quick-action-card text-center p-3" [routerLink]="['/fees']" style="cursor: pointer;">
                <i class="bi bi-credit-card"></i>
                <small>{{ 'DASHBOARD.PAYMENTS' | translate }}</small>
              </div>
            </div>
            <div class="col-4 items">
              <div class="card quick-action-card text-center p-3" [routerLink]="['/reclamations']" style="cursor: pointer;">
                <i class="bi bi-exclamation-triangle"></i>
                <small>{{ 'DASHBOARD.RECLAMATIONS' | translate }}</small>
              </div>
            </div>
          </div>
        </div>
        <div class="card calendar-dashbord shadow-sm mb-3">
          <div class="">
            <app-calendar [events]="upcomingEvents"></app-calendar>
          </div>
        </div>
        <div class="card card-general upcoming-events-desk shadow-sm mb-3">
          <div class="card-header bg-white py-3">
            <div class="d-flex justify-content-between align-items-center">
              <h5 class="mb-0"><i class="bi bi-calendar-event me-2"></i>{{ 'DASHBOARD.UPCOMING_EVENTS' | translate }}</h5>
            </div>
          </div>
          <div class="card-body">
            <!-- Loading state -->
            <div *ngIf="loadingStates.events" class="skeleton-events">
              <div class="skeleton-event" *ngFor="let i of [1,2]"></div>
            </div>
            <!-- Loaded state -->
            <div *ngIf="!loadingStates.events" class="events-list">
              <div *ngIf="upcomingEvents.length === 0" class="text-center text-muted py-4">
                <i class="bi bi-calendar-x" style="font-size: 3rem; opacity: 0.3;"></i>
                <p class="mt-2 mb-0">{{ 'DASHBOARD.NO_EVENTS' | translate }}</p>
              </div>
              <div *ngFor="let event of upcomingEvents; trackBy: trackById" class="event-item mb-3" [routerLink]="['/events/detail', event.id]" style="cursor: pointer;">
                <div class="d-flex align-items-center p-3 bg-light rounded">
                  <div class="event-icon me-2">
                    <div class="icon-circle d-flex flex-column align-items-center justify-content-center">
                      <div class="day">{{ event.time | date:'d' }}</div>
                      <div class="month">{{ event.time | date:'MMM' }}</div>
                    </div>
                  </div>
                  <div class="event-content flex-grow-1">
                    <div class="d-flex justify-content-between align-items-start">
                      <h6 class="event-name mb-0">{{ event.name }}</h6>
                    </div>
                    <div class="event-details">
                      <small class="text-muted clplace" *ngIf="event.place">
                        {{ event.place }}
                      </small>
                      <div>

                      <small class="text-muted date-type">
                        <span class="me-2"><i class="bi bi-calendar2-event"></i> {{ event.type }}</span>
                        <span><i class="bi bi-clock-history"></i> {{ event.time | date:'h:mm a' }}</span>
                      </small>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="card card-general card-recently fee-history shadow-sm mb-3">
          <div class="card-header d-flex justify-content-between align-items-center">
            <h5 class="mb-0"><i class="bi bi-exclamation-triangle me-2"></i>{{ 'DASHBOARD.UNPAID_CHILDREN' | translate }}</h5>
            <a [routerLink]="['/fees']" class="view-all btn btn-sm btn-outline-primary">{{ 'DASHBOARD.VIEW_ALL' | translate }}</a>
          </div>
          <div class="card-body">
            <!-- Loading state -->
            <div *ngIf="loadingStates.fees" class="skeleton-table">
              <div class="skeleton-row" *ngFor="let i of [1,2,3]"></div>
            </div>
            <!-- Loaded state -->
            <div *ngIf="!loadingStates.fees">
              <div *ngIf="unpaidChildren.length === 0" class="text-center text-muted py-4">
                <i class="bi bi-check-circle" style="font-size: 2rem; opacity: 0.3;"></i>
                <p class="mt-2 mb-0">{{ 'DASHBOARD.NO_UNPAID_CHILDREN' | translate }}</p>
              </div>
              <div class="table-responsive custom-table" *ngIf="unpaidChildren.length > 0">
                <table class="table table-hover mb-0">
                  <thead>
                    <tr>
                      <th>{{ 'DASHBOARD.TABLE_NAME' | translate }}</th>
                      <th>{{ 'DASHBOARD.TABLE_AMOUNT' | translate }}</th>
                      <th>{{ 'DASHBOARD.TABLE_DUE_DATE' | translate }}</th>
                      <th>{{ 'DASHBOARD.TABLE_STATUS' | translate }}</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let fee of unpaidChildren; trackBy: trackById">
                      <td class="text-nowrap">
                        <img loading="lazy" src="assets/child.png" alt="child" class="img-fluid img-student me-2" style="width: 30px; height: 30px; border-radius: 50%;">
                        {{ fee.child?.firstName }} {{ fee.child?.lastName }}
                      </td>
                      <td class="text-nowrap fw-bold">{{ fee.amount | currency }}</td>
                      <td class="text-nowrap">{{ fee.dueDate | date:'MMM d, yyyy' }}</td>
                      <td>
                        <span class="badge" [ngClass]="{'bg-warning text-dark': fee.status === 'pending', 'bg-danger': fee.status === 'overdue'}">
                          {{ fee.status === 'pending' ? ('DASHBOARD.PENDING' | translate) : ('DASHBOARD.OVERDUE' | translate) }}
                        </span>
                        <small *ngIf="fee.daysOverdue && fee.daysOverdue > 0" class="text-danger d-block">
                          {{ fee.daysOverdue }} {{ 'DASHBOARD.DAYS_OVERDUE' | translate }}
                        </small>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>

  </div>
</div>

<!-- Parent Dashboard -->
<div class="parent">
  <div *ngIf="userRole === 'Parent'">
    <!-- New Design -->
    <div class="parent-dashboard-new">
      <!-- Header Section -->
      <div class="dashboard-header">
        <div class="header-content">
          <div class="row welcome-text">
            <div class="col-10">
              <h2 class="mb-1 mt-4 welcome font-inter">{{ getGreeting() }}, {{ userName }} ! üëã</h2>
              <p class="mb-0 black font-inter ">{{ 'DASHBOARD.MINIMINDS_HOME' | translate }}</p>
            </div>
            <div class="col-2">
              <img [src]="userProfilePicture || 'assets/default-avatar.svg'" [alt]="userName"
                class="rounded-circle profile-image img-fluid" (click)="goToParentProfile()" style="cursor: pointer;">
            </div>
          </div>

        </div>
        <!-- Child Status Card with Slider -->
        <!-- Loading state for children -->
        <div *ngIf="loadingStates.children" class="child-status-card skeleton-child-card">
          <div class="skeleton-avatar"></div>
          <div class="skeleton-text-group">
            <div class="skeleton-text"></div>
            <div class="skeleton-text short"></div>
          </div>
        </div>
        <!-- Loaded state -->
        <div [class]="myChildren.length > 1 ? 'child-status-card' : 'child-status-card one'" class="child-status-card" *ngIf="!loadingStates.children && myChildren.length > 0">
          <div  [class]="myChildren.length > 1 ? 'card-header-row' : 'one-child'">
            <h2 class="section-title" *ngIf="myChildren.length > 1">{{ 'DASHBOARD.CHILD_STATUS' | translate }}</h2>
            <div class="slider-controls" *ngIf="myChildren.length > 1">
              <button class="slider-btn" (click)="prevChild()" [disabled]="selectedChildIndex === 0">
                <i class="bi bi-chevron-left"></i>
              </button>
              <span class="child-counter">{{ selectedChildIndex + 1 }}/{{ myChildren.length }}</span>
              <button class="slider-btn" (click)="nextChild()"
                [disabled]="selectedChildIndex === myChildren.length - 1">
                <i class="bi bi-chevron-right"></i>
              </button>
            </div>
            <button class="info-btn" [routerLink]="['/children/detail', getSelectedChild()?.id]">
              <i class="bi bi-info-circle"></i>
            </button>
          </div>
          <div class="child-info" [routerLink]="['/children/detail', getSelectedChild()?.id]" style="cursor: pointer;">
            <img [src]="getSelectedChild()?.profilePicture || 'assets/child.png'"
              [alt]="getSelectedChild()?.firstName" class="child-avatar">
            <div class="child-details">
              <h3 class="child-name">{{ getSelectedChild()?.firstName }} {{ getSelectedChild()?.lastName }}</h3>
              <p class="child-age">{{ getAge(getSelectedChild()?.dateOfBirth) }} {{ 'DASHBOARD.OLD' | translate }}</p>
              <p class="check-in-time">{{ getCheckInStatus(getSelectedChild()) }}</p>
            </div>
          </div>
          <!-- Child Dots Indicator -->
          <div class="child-dots" *ngIf="myChildren.length > 1">
            <span *ngFor="let child of myChildren; let i = index; trackBy: trackById" class="dot" [class.active]="i === selectedChildIndex"
              (click)="selectChild(i)">
            </span>
          </div>
        </div>
      </div>

      
      <div class="container-fluid">
        <!-- Today Stats -->
        <div class="today-stats">
          <h2 class="section-title">{{ 'DASHBOARD.TODAY_STATS' | translate }} - {{ getSelectedChildName() }}</h2>
          <!-- Loading state -->
          <div *ngIf="loadingStates.activities" class="stats-grid">
            <div class="stat-item skeleton-stat" *ngFor="let i of [1,2,3]">
              <div class="skeleton-icon"></div>
              <div class="skeleton-text-group">
                <div class="skeleton-text"></div>
                <div class="skeleton-text short"></div>
              </div>
            </div>
          </div>
          <!-- Loaded state -->
          <div *ngIf="!loadingStates.activities" class="stats-grid">
            <div class="stat-item">
              <div class="stat-icon-wrapper">
                <span class="stat-icon">üçé</span>
              </div>
              <div class="stat-info">
                <h4 class="stat-label">{{ 'DASHBOARD.MEALS' | translate }}</h4>
                <p class="stat-value">({{ todayStats.meals.completed }}/{{ todayStats.meals.total }} {{ 'DASHBOARD.COMPLETED' | translate }})</p>
              </div>
            </div>
            <div class="stat-item">
              <div class="stat-icon-wrapper">
                <span class="stat-icon">üåô</span>
              </div>
              <div class="stat-info">
                <h4 class="stat-label">{{ 'DASHBOARD.NAP_TIME' | translate }}</h4>
                <p class="stat-value">({{ todayStats.napTime }})</p>
              </div>
            </div>
            <div class="stat-item">
              <div class="stat-icon-wrapper">
                <span class="stat-icon">üé®</span>
              </div>
              <div class="stat-info">
                <h4 class="stat-label">{{ 'DASHBOARD.ACTIVITIES' | translate }}</h4>
                <p class="stat-value">({{ todayStats.activities }} {{ 'DASHBOARD.COMPLETED' | translate }})</p>
              </div>
            </div>
          </div>
        </div>
        <!-- Activities Timeline -->
        <div class="activities-section">
          <h2 class="section-title">{{ 'DASHBOARD.ACTIVITIES' | translate }} - {{ getSelectedChildName() }}</h2>
          <!-- Loading state -->
          <div *ngIf="loadingStates.activities" class="skeleton-timeline">
            <div class="skeleton-timeline-item" *ngFor="let i of [1,2,3]"></div>
          </div>
          <!-- Loaded state -->
          <div *ngIf="!loadingStates.activities">
            <div class="event-card" *ngIf="todayActivities.length == 0">
              <div class="card card-general">
                <div class="card-body text-center text-muted py-4">
                  <i class="bi bi-calendar-x icon-3x mb-3 opacity-25"></i>
                  <p class="mb-0">{{ 'DASHBOARD.NO_ACTIVITY_TODAY' | translate }}</p>
                </div>
              </div>
            </div>
            <div class="timeline">
              <div class="timeline-item clickable-activity"
                   *ngFor="let activity of todayActivities; trackBy: trackById"
                   [routerLink]="['/activities/detail', activity.id]"
                   style="cursor: pointer;">
                <div class="timeline-marker active"></div>
                <div class="timeline-content">
                  <div class="activity-info">
                    <p class="timeline-time">{{ activity.activityTime | date:'h:mm a' }}: {{ activity.activityType }}</p>
                    <p class="activity-notes" *ngIf="activity.notes">{{ activity.notes }}</p>
                    <p class="activity-duration" *ngIf="activity.duration">{{ 'DASHBOARD.DURATION' | translate }}: {{ activity.duration }}</p>
                    <p class="activity-food" *ngIf="activity.foodItem">{{ 'DASHBOARD.FOOD' | translate }}: {{ activity.foodItem }}</p>
                  </div>
                  <i class="bi bi-chevron-right activity-arrow"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Upcoming Events -->
        <div class="upcoming-events">
          <h2 class="section-title">{{ 'DASHBOARD.UPCOMING_EVENTS' | translate }}</h2>
          <!-- Loading state -->
          <div *ngIf="loadingStates.events" class="skeleton-events-parent">
            <div class="skeleton-event-card" *ngFor="let i of [1,2]"></div>
          </div>
          <!-- Loaded state -->
          <div *ngIf="!loadingStates.events">
            <div class="card card-general" *ngIf="upcomingEvents.length == 0">
              <div class="text-center">
                <div class="card-body text-center text-muted py-4">
                  <i class="bi bi-calendar-x icon-3x mb-3 opacity-25"></i>
                  <p class="mb-0">{{ 'DASHBOARD.NO_EVENTS' | translate }}</p>
                </div>
              </div>
            </div>
            <div class="event-card" *ngFor="let event of upcomingEvents; trackBy: trackById" [routerLink]="['/events/detail', event.id]" style="cursor: pointer;">
              <div class="event-icon">
                <i class="bi bi-calendar-event"></i>
              </div>
              <div class="event-details">
                <h4 class="event-title">{{ event.name }}</h4>
                <p class="event-date">{{ event.time | date:'MMM d, yyyy' }}</p>
                <p class="event-place" *ngIf="event.place">{{ event.place }}</p>
              </div>
            </div>
          </div>
        </div>
        <!-- Recent Photos -->
        <div class="recent-photos-section">
          <h2 class="section-title">{{ 'DASHBOARD.RECENT_PHOTOS' | translate }} - {{ getSelectedChildName() }}</h2>
          <!-- Loading state -->
          <div *ngIf="loadingStates.photos" class="photos-grid">
            <div class="photo-item skeleton-photo" *ngFor="let i of [1,2,3]"></div>
          </div>
          <!-- Loaded state -->
          <div *ngIf="!loadingStates.photos">
            <div class="card card-general" *ngIf="recentPhotos.length === 0">
              <div class="card-body text-center text-muted py-4">
                <i class="bi bi-images icon-3x mb-3 opacity-25"></i>
                <p class="mb-0">{{ 'DASHBOARD.NO_PHOTOS_YET' | translate }}</p>
              </div>
            </div>
            <div class="photos-grid" *ngIf="recentPhotos.length > 0">
              <div class="photo-item" *ngFor="let photo of recentPhotos; trackBy: trackById" [routerLink]="['/gallery']">
                <img [src]="photo.thumbnailData || photo.imageData || 'assets/placeholder.jpg'"
                     [alt]="photo.title || 'Child photo'"
                     class="photo-img">
                <div class="photo-overlay">
                  <i class="bi bi-eye-fill"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Activities Timeline -->
      <div class="container-fluid activities-section">
        <h2 class="section-title">{{ 'DASHBOARD.ACTIVITIES' | translate }} - {{ getSelectedChildName() }}</h2>
        <div class="event-card" *ngIf="todayActivities.length == 0">
          <div class="card card-general">
            <div class="card-body text-center text-muted py-4">
              <i class="bi bi-calendar-x icon-3x mb-3 opacity-25"></i>
              <p class="mb-0">{{ 'DASHBOARD.NO_ACTIVITY_TODAY' | translate }}</p>
            </div>
          </div>
        </div>
        <div class="timeline">
          <div class="timeline-item" *ngFor="let activity of todayActivities; trackBy: trackById">
            <div class="timeline-marker active"></div>
            <div class="timeline-content">
              <p class="timeline-time">{{ activity.activityTime | date:'h:mm a' }}: {{ activity.activityType }}</p>
              <p class="activity-notes" *ngIf="activity.notes">{{ activity.notes }}</p>
              <p class="activity-duration" *ngIf="activity.duration">{{ 'DASHBOARD.DURATION' | translate }}: {{ activity.duration }}</p>
              <p class="activity-food" *ngIf="activity.foodItem">{{ 'DASHBOARD.FOOD' | translate }}: {{ activity.foodItem }}</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Upcoming Events -->
      <div class="container-fluid upcoming-events">
        <h2 class="section-title">{{ 'DASHBOARD.UPCOMING_EVENTS' | translate }}</h2>
        <div class="card card-general" *ngIf="upcomingEvents.length == 0">
          <div class="text-center">

            <div class="card-body text-center text-muted py-4">
              <i class="bi bi-calendar-x icon-3x mb-3 opacity-25"></i>
              <p class="mb-0">{{ 'DASHBOARD.NO_EVENTS' | translate }}</p>
            </div>
          </div>
        </div>
        <div class="event-card" *ngFor="let event of upcomingEvents; trackBy: trackById" [routerLink]="['/events/detail', event.id]"
          style="cursor: pointer;">
          <div class="event-icon">
            <i class="bi bi-calendar-event"></i>
          </div>
          <div class="event-details">
            <h4 class="event-title">{{ event.name }}</h4>
            <p class="event-date">{{ event.time | date:'MMM d, yyyy' }}</p>
            <p class="event-place" *ngIf="event.place">{{ event.place }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>